#!/usr/bin/env node
                          

var args = process.argv.concat().splice(2),
ops = {},
cupboard = require('../lib/cupboard');   
                    

while(args.length)
{                    
	var arg = args.shift();
	
	switch(arg)
	{
	
		case "list":  
	   	case "ls":
			cupboard.list();
		break;  
		
		case "add-template":
			cupboard.addTemplate(args.shift(), args.shift());
		break;
		
		case "templates":
			cupboard.listTemplates();
		break;
		
		case "count":
			cupboard.count();
		break;
		
		case "updates": 
			cupboard.updates();
		break;  
		  
		case "init":     
			cupboard.init(args.shift());
		break;
		
		case "remove": 
		case "rm":
			cupboard.remove(args.shift());
		break;
		
		default:           
			ops.command = arg;
			ops.target = args.shift(); 
			ops.params = args.concat();  
	    break;
	}                  
	
	if(ops.command) break;
}    

if(ops.command) cupboard.execute(ops);